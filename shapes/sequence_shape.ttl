@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix uml: <http://example.org/uml#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

# Sequence Diagram Shape
uml:SequenceDiagramShape
  a sh:NodeShape ;
  sh:targetClass uml:SequenceDiagram ;
  sh:property [
    sh:path uml:elementCount ;
    sh:datatype xsd:integer ;
    sh:minInclusive 0 ;
  ] ;
  sh:property [
    sh:path uml:relationshipCount ;
    sh:datatype xsd:integer ;
    sh:minInclusive 0 ;
  ] .

# Participant Shape (base for all participant types)
uml:ParticipantShape
  a sh:NodeShape ;
  sh:targetClass uml:Participant, uml:Actor, uml:Boundary, 
                 uml:Control, uml:Entity, uml:Database ;
  sh:property [
    sh:path uml:name ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "A participant must have a name" ;
  ] ;
  sh:property [
    sh:path uml:alias ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path uml:participantType ;
    sh:datatype xsd:string ;
    sh:in ( "Participant" "Actor" "Boundary" "Control" "Entity" "Database" ) ;
  ] .

# Message Shape
uml:MessageShape
  a sh:NodeShape ;
  sh:targetClass uml:Message ;
  sh:property [
    sh:path uml:source ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "A message must have a source participant" ;
  ] ;
  sh:property [
    sh:path uml:target ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "A message must have a target participant" ;
  ] ;
  sh:property [
    sh:path uml:message ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path uml:synchronous ;
    sh:datatype xsd:boolean ;
    sh:maxCount 1 ;
  ] .
